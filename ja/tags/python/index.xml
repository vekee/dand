<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Python on DUAN DAHAI</title><link>https://www.duandahai.com/ja/tags/python/</link><description>Recent content in Python on DUAN DAHAI</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Wed, 11 Jan 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://www.duandahai.com/ja/tags/python/index.xml" rel="self" type="application/rss+xml"/><item><title>Pythonでファイルを圧縮する際のファイル名文字化け対策</title><link>https://www.duandahai.com/ja/posts/jp/20230111-python-zip.ja/</link><pubDate>Wed, 11 Jan 2023 00:00:00 +0000</pubDate><guid>https://www.duandahai.com/ja/posts/jp/20230111-python-zip.ja/</guid><description>Pythonでファイルを圧縮する際のファイル名文字化け対策をご紹介します。
日本語名のファイルに対して、Pythonでパスワード付き圧縮を実施する場合、ファイル名の文字化けが発生しました。
この問題はライブラリー内部仕様のため、ライブラリーを改造しないと解決できないそうですが、外部圧縮ツールをPython実装に利用して、強力、簡単的に圧縮できることを見つかりました。
外部圧縮ツール 私がAWS LambdaのPythonスクリプトに、7-zipのコマンドラインコマンドでzip処理を実施しています。 利用している7-zipツールの7zzsは以下のページからダウンロードしました。
7zipのコマンドライン
Windows環境にコマンドラインの利用はもちろんできます。
利用方法 私が7zzsをS3の指定場所に保存し、zip処理で、s3からLambdaの/tmp配下にダウンロードして利用しています。
この場合、7zzsの実行権限を設定する必要があるので、以下の実装をご参照ください。
Python実装 1 2 3 4 5 6 7 8 # zipツールのダウンロード実装略 # zipツールの実行権限を付与 cmd = f&amp;#34;chmod 755 /tmp/7zzs&amp;#34; os.system(cmd) # パスワード付きzipツールを実行する(パスワード: 123456) cmd = &amp;#34;/tmp/7zzs a 日本語名ファイル.zip 日本語名ファイル.pdf -p 123456&amp;#34; os.system(cmd) 7-zipのコマンドラインの利用紹介は、公開しているホームページにご参照ください。</description></item></channel></rss>